<?xml version="1.0" encoding="ASCII"?>
<tosca:TopologyTemplate xmi:version="2.0" xmlns:xmi="http://www.omg.org/XMI" xmlns:tosca="http://tosca/1.0" tosca_definitions_version="cloudify_dsl_1_2">
  <imports file="http://www.getcloudify.org/spec/cloudify/3.3.1/types.yaml"/>
  <imports file="http://dice-project.github.io/DICE-FCO-Plugin-Cloudify/0.1.1/plugin.yaml"/>
  <imports file="http://dice-project.github.io/cloudify-chef-plugin/1.3.2/plugin.yaml"/>
  <imports file="http://dice-project.github.io/DICE-Deployment-Cloudify/spec/fco/develop/plugin.yaml"/>
  <nodeTemplates node_template_name="vm1" type="dice.hosts.Small">
    <relationships type="dice.relationships.ProtectedBy" target="spark_master1_firewall"/>
    <instances deploy="1"/>
  </nodeTemplates>
  <nodeTemplates node_template_name="vm2" type="dice.hosts.Small">
    <relationships type="dice.relationships.ProtectedBy" target="spark_worker_1_firewall"/>
    <instances deploy="1"/>
  </nodeTemplates>
  <nodeTemplates node_template_name="spark_master1" type="dice.components.spark.Master">
    <relationships type="dice.relationships.ContainedIn" target="vm1"/>
    <configurations property_name="driverMemory" value="1"/>
    <configurations property_name="driverCores" value="1"/>
    <configurations property_name="maxResultSize" value="1"/>
    <configurations property_name="UIPort" value="4040"/>
  </nodeTemplates>
  <nodeTemplates node_template_name="spark_master1_firewall" type="dice.firewall_rules.spark.Master"/>
  <nodeTemplates node_template_name="spark_worker_1" type="dice.components.spark.Worker">
    <relationships type="dice.relationships.ContainedIn" target="vm2"/>
    <relationships type="dice.relationships.spark.ConnectedToMaster" target="spark_master1"/>
    <configurations property_name="sparkExecutorMemory" value="1"/>
  </nodeTemplates>
  <nodeTemplates node_template_name="spark_worker_1_firewall" type="dice.firewall_rules.spark.Worker"/>
</tosca:TopologyTemplate>
